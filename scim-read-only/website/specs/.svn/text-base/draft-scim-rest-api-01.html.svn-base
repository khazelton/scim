<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>DRAFT: SCIM PROTOCOL</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="SCIM PROTOCOL">
<meta name="keywords" content="SCIM">
<meta name="generator" content="xml2rfc v1.36 (http://xml.resource.org/)">
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: small; color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: small; font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: small; font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: small; text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">DRAFT</td><td class="header">T. Drake, Ed.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">UnboundID</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">C. Mortimore</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">SalesForce</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">M. Ansari</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">May 2011</td></tr>
</table></td></tr></table>
<h1><br />SCIM PROTOCOL</h1>

<h3>Abstract</h3>

<p>
        The Simple Cloud Identity Management (SCIM) specification is designed to
        make managing user identity in cloud based applications and services
        easier. The specification suite seeks to build upon experience with
        existing schemas and deployments, placing specific emphasis on
        simplicity of development and integration, while applying existing
        authentication, authorization, and privacy models. It's intent is to
        reduce the cost and complexity of user management operations by
        providing a common user schema and extension model, as well as binding
        documents to provide patterns for exchanging this schema using standard
        protocols. In essence, make it fast, cheap, and easy to move users in
        to, out of, and around the cloud.
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction and Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">1.1.</a>&nbsp;
Intended Audience<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notat">1.2.</a>&nbsp;
Notational Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#defs">1.3.</a>&nbsp;
Definitions<br />
<a href="#aa">2.</a>&nbsp;
Authentication and Authorization<br />
<a href="#Security">3.</a>&nbsp;
Security Considerations<br />
<a href="#api">4.</a>&nbsp;
API<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#create-resource">4.1.</a>&nbsp;
Creating Resources<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get-resources-ops">4.2.</a>&nbsp;
Retrieving Resources<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get-resource">4.2.1.</a>&nbsp;
Retrieving a known Resource<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#query-resources">4.2.2.</a>&nbsp;
List/Query Resources<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.3.</a>&nbsp;
Modifying Resources<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#edit-resource-with-put">4.3.1.</a>&nbsp;
Modifying with PUT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#edit-resource-with-patch">4.3.2.</a>&nbsp;
Modifying with PATCH<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#delete-resource">4.4.</a>&nbsp;
Deleting Resources<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#change-password">4.5.</a>&nbsp;
Change password<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#schemas">4.6.</a>&nbsp;
Retrieving Service Provider Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#io-format">4.7.</a>&nbsp;
Data Input/Output Formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.8.</a>&nbsp;
Additional retrieval query parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">4.9.</a>&nbsp;
HTTP Response Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#etags">4.10.</a>&nbsp;
Versioning Resources<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">4.11.</a>&nbsp;
HTTP Method Overloading<br />
<a href="#anchor9">5.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction and Overview</h3>

<p>The SCIM Protocol is an application-level, REST protocol for
        provisioning and managing user identity on the web. The protocol
        supports creating, editing, deleting, querying and retrieving Users and
        Groups as well as simple password change requests.
      
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Intended Audience</h3>

<p>
          This document is intended as a guide to SCIM API usage for both
          identity Service Providers and Consumers.
        
</p>
<a name="notat"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Notational Conventions</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
          "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
          document are to be interpreted as described in [RFC2119].

          These keywords are capitalized when used to unambiguously specify
          requirements of the protocol or application features and behavior that
          affect the interoperability and security of implementations. When
          these words are not capitalized, they are meant in their
          natural-language sense
        
</p>
<p>
          For purposes of readability examples are not URL encoded. Implementers
          MUST percent encode URLs as described in
          <a href='http://tools.ietf.org/html/rfc3986#section-2
          .1'>RFC3896 2.1</a>
        
</p>
<a name="defs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Definitions</h3>

<blockquote class="text"><dl>
<dt>Service Provider:</dt>
<dd>A web application that provides
            identity information via the SCIM protocol.
          
</dd>
<dt>Consumer:</dt>
<dd>A website or application that uses the SCIM
            protocol to manage identity managed by the Service Provider.
          
</dd>
<dt>Base URL:</dt>
<dd>The SCIM REST API is always relative to a Base
            URL for the API. The Base URL MUST NOT contain a query string, as
            additional path information and query string variables MAY be
            appended by Consumers as part of forming the request. Example:
            https://example.com/scim/v1/
          
</dd>
<dt>Singular Attribute:</dt>
<dd>A Resource attribute that can appear
            at most once per Resource, e.g.displayName.
          
</dd>
<dt>Plural Attribute:</dt>
<dd>A Resource attribute that can appear
            multiple times per Resource, e.g. emails
          
</dd>
<dt>Simple Attribute:</dt>
<dd>A Singular or Plural attribute whose
            value is a single attribute.
          
</dd>
<dt>Complex Attribute:</dt>
<dd>A Singular or Plural attribute whose
            value is an object containing multiple sub-attribute attributes.
          
</dd>
<dt>Sub-Attribute:</dt>
<dd>An attribute contained by a Complex
            Attribute.
          
</dd>
<dt>Resource:</dt>
<dd>The Service Provider managed artifact; e.g.,
            User or Group
          
</dd>
</dl></blockquote>
<a name="aa"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Authentication and Authorization</h3>

<p>
        The SCIM protocol does not define a scheme for authentication and
        authorization therefore implementers are free to choose mechanisms
        appropriate to their use cases. The choice of authentication mechanism
        will impact interoperability. It is RECOMMENDED that clients be
        implemented in such a way that new authentication schemes can be
        deployed. Implementers SHOULD support existing
        authentication/authorization schemes. In particular,
        <a href='http://tools
        .ietf.org/html/draft-ietf-oauth-v2-16'>OAuth2</a>
        is RECOMMENDED. Appropriate security considerations of the selected
        authentication and authorization schemes SHOULD be taken.

        Because this protocol uses HTTP response status codes as the primary
        means of reporting the result of a request, servers are advised to
        respond to unauthorized or unauthenticated requests using the 401
        response code in accordance with section 10.4.2 of<a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2'>RFC2616</a>.
      
</p>
<p>
        All examples assume OAuth2; e.g.,
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
            GET /User/uid=bjensen,dc=example,dc=com HTTP/1.1
            Host: example.com
            Authorization: Bearer h480djs93hd8
</pre></div>
<p>
        The context of the request (i.e. the user for whom data is being
        requested) MUST be inferred by Service Providers.
      
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Security Considerations</h3>

<p>
        The SCIM Protocol is based on HTTP and thus subject to the security
        considerations found in Section 15 of<a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec15.html#sec15'>RFC2616</a>.

        In recognition that SCIM Resources; e.g., User and Group, contain
        sensitive information Consumers and Service Providers SHOULD require an
        authenticated and TLS protected transport.
      
</p>
<a name="api"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
API</h3>

<p>
        The SCIM protocol specifies well known endpoints and operations for
        managing User, Group and Password resources via standard HTTP methods:
      
</p>
<blockquote class="text"><dl>
<dt>GET</dt>
<dd>Retrieves a complete or partial Resource
        
</dd>
<dt>POST</dt>
<dd>Creates a new Resource
        
</dd>
<dt>PUT</dt>
<dd>Modifies a Resource with a complete, consumer
          specified Resource (replace)
        
</dd>
<dt>PATCH</dt>
<dd>Modifies a Resource with a set of consumer specified
          changes (partial update) or changes a User password
        
</dd>
<dt>DELETE</dt>
<dd>Deletes a Resource.
        
</dd>
</dl></blockquote><br /><hr class="insert" />
<a name="endpoint-summary"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="left">Resource</th><th align="left">Endpoint</th><th align="left">Operations</th><th align="left">Description</th></tr>
<tr>
<td align="left">User</td>
<td align="left">/User</td>
<td align="left"><a class='info' href='#get-resource'>GET<span> (</span><span class='info'>Retrieving a known Resource</span><span>)</span></a>,
          <a class='info' href='#create-resource'>POST<span> (</span><span class='info'>Creating Resources</span><span>)</span></a>,
          <a class='info' href='#edit-resource-with-put'>PUT<span> (</span><span class='info'>Modifying with PUT</span><span>)</span></a>,
          <a class='info' href='#edit-resource-with-patch'>PATCH<span> (</span><span class='info'>Modifying with PATCH</span><span>)</span></a>,
          <a class='info' href='#delete-resource'>DELETE<span> (</span><span class='info'>Deleting Resources</span><span>)</span></a>
        </td>
<td align="left">Read/Modify Users</td>
</tr>
<tr>
<td align="left">
          User Query/Listing
        </td>
<td align="left">/Users</td>
<td align="left">
          <a class='info' href='#query-resources'>GET<span> (</span><span class='info'>List/Query Resources</span><span>)</span></a>
        </td>
<td align="left">Retrieve User(s) via ad hoc queries</td>
</tr>
<tr>
<td align="left">Group</td>
<td align="left">/Group</td>
<td align="left"><a class='info' href='#get-resource'>GET<span> (</span><span class='info'>Retrieving a known Resource</span><span>)</span></a>,
          <a class='info' href='#create-resource'>POST<span> (</span><span class='info'>Creating Resources</span><span>)</span></a>,
          <a class='info' href='#edit-resource-with-put'>PUT<span> (</span><span class='info'>Modifying with PUT</span><span>)</span></a>,
          <a class='info' href='#edit-resource-with-patch'>PATCH<span> (</span><span class='info'>Modifying with PATCH</span><span>)</span></a>,
          <a class='info' href='#delete-resource'>DELETE<span> (</span><span class='info'>Deleting Resources</span><span>)</span></a>
        </td>
<td align="left">Read/Modify Groups</td>
</tr>
<tr>
<td align="left">
          User Query/Listing
        </td>
<td align="left">/Groups</td>
<td align="left">
          <a class='info' href='#query-resources'>GET<span> (</span><span class='info'>List/Query Resources</span><span>)</span></a>
        </td>
<td align="left">Retrieve Group(s) via ad hoc queries</td>
</tr>
<tr>
<td align="left">Change User Password</td>
<td align="left">
          /User/{userId}/password
        </td>
<td align="left">
          <a class='info' href='#change-password'>PATCH<span> (</span><span class='info'>Change password</span><span>)</span></a>
        </td>
<td align="left">Change a User's password</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: Defined endpoints&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
        All requests to the Service Provider are made via
        <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9'>HTTP operations</a>
        on a URL derived from the Base URL. Responses are returned in the body
        of the HTTP response, formatted as JSON or XML, depending on what is
        requested. Response and error codes SHOULD be transmitted via the HTTP
        status code of the response (if possible), and SHOULD also be specified
        in the body of the response.
      
</p>
<a name="create-resource"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Creating Resources</h3>

<p>To create new Resources, clients send POST requests to the Resource
          endpoint; i.e., /User or /Group.
        
</p>
<p>Successful Resource creation is indicated with a 201 ("Created")
          response code. Upon successful creation, the response body MUST
          contain the newly created Resource. Since the server is free to alter
          and/or ignore POSTed content, returning the full representation can be
          useful to the client, enabling it to correlate the client and server
          views of the new Resource.

          When a Resource is created, its URI must be returned in the response
          Location header.
        
</p>
<p>Below, the client sends a POST request containing a User
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
POST /User  HTTP/1.1
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8
Content-Length: ...

{
  "schemas":["urn:scim:schemas:core:1.0"],
  "userName":"bjensen",
  "externalId":"bjensen",
  "name":{
    "formatted":"Ms. Barbara J Jensen III",
    "familyName":"Jensen",
    "givenName":"Barbara"
  }
}

</pre></div>
<p>The server signals a successful creation with a status code of 201.
          The response includes a Location header indicating the User URI, and a
          representation of that User in the body of the response.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 201 Created
Content-Type: application/json
Location: https://example.com/v1/User/uid=bjensen,dc=example,dc=com
ETag: "e180ee84f0671b1"

{
  "schemas":["urn:scim:schemas:core:1.0"],
  "id":"uid=bjensen,dc=example,dc=com",
  "meta":{
    "created":"2011-08-01T21:32:44.882Z",
    "lastModified":"2011-08-01T21:32:44.882Z"
  },
  "name":{
    "formatted":"Ms. Barbara J Jensen III",
    "familyName":"Jensen",
    "givenName":"Barbara"
  },
  "userName":"bjensen"
}
</pre></div>
<a name="get-resources-ops"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Retrieving Resources</h3>

<p>Users and Group Resources are retrieved via opaque, unique URLs or
          via Query. Service Providers MAY choose to respond with a sub-set of
          Resource attributes, though MUST minimally return the Resource id and
          meta attributes.
        
</p>
<a name="get-resource"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
Retrieving a known Resource</h3>

<p>To retrieve a known Resource, clients send GET requests to the
            Resource endpoint; e.g., /User/{id} or /Group/{id}.
          
</p>
<p>If the Resource exists the server responds with a status code of
            200 and includes the result in the body of the response.
          
</p>
<p>The below example retrieves a single User via the /User endpoint.
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


GET /User/uid=bjensen,dc=example,dc=com
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8

</pre></div>
<p>The server responds with:
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


HTTP/1.1 200 OK
Content-Type: application/json
Location: https://example.com/v1/User/uid=bjensen,dc=example,dc=com
ETag: "f250dd84f0671c3"

{
  "schemas":["urn:scim:schemas:core:1.0"],
  "id":"uid=bjensen,dc=example,dc=com",
  "meta":{
    "created":"2011-08-01T18:29:49.793Z",
    "lastModified":"2011-08-01T18:29:49.793Z"
  },
  "name":{
    "formatted":"Ms. Barbara J Jensen III",
    "familyName":"Jensen",
    "givenName":"Barbara"
  },
  "userName":"bjensen",
  "phoneNumbers":[
    {
      "value":"555-555-8377",
      "type":"work"
    }
  ],
  "emails":[
    {
      "value":"bjensen@example.com",
      "type":"work"
    }
  ]
}
</pre></div>
<a name="query-resources"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
List/Query Resources</h3>

<p>
            SCIM defines a standard set of operations that can be used to
            filter, sort, and paginate response results. The operations are
            specified by adding query parameters to the Resource's endpoint.
            Service Providers MAY support additional query parameters not
            specified here, and Providers SHOULD ignore any query parameters
            they don't recognize.
          
</p>
<p>The below example returns the userName for all Users
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

GET /Users?attributes=userName
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 200 OK
Content-Type: application/json

{
  "totalResults":2,
  "schemas":["urn:scim:schemas:core:1.0"],
  "Resources":[
    {
      "userName":"bjensen"
    },
    {
      "userName":"jsmith"
    }
  ]
}</pre></div>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.1"></a><h3>4.2.2.1.&nbsp;
Filtering</h3>

<p>
              Filtering is OPTIONAL. Consumers may request a subset of Resources
              by specifying the 'filter' URL query parameter containing a filter
              expression. When specified only those Resources matching the
              filter expression SHALL be returned. The expression language that
              is used in the filter parameter supports references to attributes
              and literals. The literal values can be strings enclosed in single
              quotes, numbers and Boolean values; i.e., true or false.
            
</p>
<p>
              The attribute name and attribute operator are case insensitive.
              For example, the following two expressions will evaluate to the
              same logical value:
            
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
filter=userName Eq 'john'

filter=Username eq 'john'
</pre></div>
<p>
              The filter parameter MUST contain at least one valid Boolean
              expression. Each expression MUST contain an attribute name
              followed by an attribute operator and optional value. Multiple
              expressions MAY be combined using the two logical operators.
              Furthermore expressions can be grouped together using “()”.
            
</p>
<p>
              The operators supported in the expression are listed in the
              following table.
            
</p><br /><hr class="insert" />
<a name="filter-operator-table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Operator</th><th align="left">Description</th><th align="left">Behavior</th></tr>
<tr>
<td align="left">eq</td>
<td align="left">equal</td>
<td align="left">The attribute and operator values must be identical for a
                match.
              </td>
</tr>
<tr>
<td align="left">co</td>
<td align="left">contains</td>
<td align="left">The entire operator value must be a substring of the attribute
                value for a match.
              </td>
</tr>
<tr>
<td align="left">sw</td>
<td align="left">starts with</td>
<td align="left">The entire operator value must be a substring of the attribute
                value, starting at the beginning of the attribute value. This
                criterion is satisfied if the two strings are identical.
              </td>
</tr>
<tr>
<td align="left">pr</td>
<td align="left">present (has value)</td>
<td align="left">If the attribute has a non-empty value, or if it contains a
                non-empty node for complex attributes there is a match.
              </td>
</tr>
<tr>
<td align="left">gt</td>
<td align="left">greater than</td>
<td align="left">If the attribute value is greater than operator value, there is
                a match. The actual comparison is dependent on the attribute
                type. For string attribute types, this is a lexicographical
                comparison and for DateTime types, it is a chronological
                comparison.
              </td>
</tr>
<tr>
<td align="left">ge</td>
<td align="left">greater than or equal</td>
<td align="left">If the attribute value is greater than or equal to the operator
                value, there is a match. The actual comparison is dependent on
                the attribute type. For string attribute types, this is a
                lexicographical comparison and for DateTime types, it is a
                chronological comparison.
              </td>
</tr>
<tr>
<td align="left">lt</td>
<td align="left">less than</td>
<td align="left">If the attribute value is less than operator value, there is a
                match. The actual comparison is dependent on the attribute type.
                For string attribute types, this is a lexicographical comparison
                and for DateTime types, it is a chronological comparison.
              </td>
</tr>
<tr>
<td align="left">lte</td>
<td align="left">less than or equal</td>
<td align="left">If the attribute value is less than or equal to the operator
                value, there is a match. The actual comparison is dependent on
                the attribute type. For string attribute types, this is a
                lexicographical comparison and for DateTime types, it is a
                chronological comparison.
              </td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: Attribute
            Operators&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="logical-operator-table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Operator</th><th align="left">Description</th><th align="left">Behavior</th></tr>
<tr>
<td align="left">and</td>
<td align="left">Logical And</td>
<td align="left">The filter is only a match if both expressions evaluate to
                true.
              </td>
</tr>
<tr>
<td align="left">or</td>
<td align="left">Logical or</td>
<td align="left">The filter is a match if either expression evaluates to true.
              </td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 3: Logical
               Operators&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="grouping-operator-table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Operator</th><th align="left">Description</th><th align="left">Behavior</th></tr>
<tr>
<td align="left">()</td>
<td align="left">Precedence grouping.</td>
<td align="left">Filter expressions are evaluated from left to right unless the
                expression is enclosed in brackets.
              </td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 4: Grouping
               Operators&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              If the specified attribute in a filter expression is a Plural
              attribute, the Resource MUST match if any of the instances of the
              given attribute match the specified criterion (e.g. if a User has
              multiple emails values, only one has to match for the entire User
              to match). For complex attributes, the fully qualified
              Sub-Attribute MUST be specified in the expression using the '.'
              character as separator between the attribute name and the
              Sub-Attribute name. For example, to filter by userName the
              parameter value is userName and to filter by first name, the
              parameter value is name.givenName.
            
</p>
<p>Providers MAY support additional filter operations if they
              choose. Providers MUST decline to filter results if the specified
              filter operation is not recognized and return a HTTP 400 error
              with an appropriate human parseable response. For example, if a
              Consumer specified an unsupported operator named 'regex' the
              Service Provider should specify an error response description
              identifying the Consumer error; e.g., 'The operator 'regex' is not
              supported.'
            
</p>
<p>
              String type attributes are case insensitive by default unless the
              attribute type is defined as a caseExact string. Attribute
              operators ‘eq’, ‘co’, and ‘sw’ MUST perform caseIgnore matching
              for all string attributes unless the attribute is defined as
              caseExact. By default all string attributes are caseIgnore.
            
</p>
<p>Examples:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

filter=userName eq 'bjensen'

filter=userName co 'jensen'

filter=userName sw 'J'

filter=title pr

filter=meta.lastModified gt '2011-05-13T04:42:34Z'

filter=meta.lastModified ge '2011-05-13T04:42:34Z'

filter=meta.lastModified lt '2011-05-13T04:42:34Z'

filter=meta.lastModified le '2011-05-13T04:42:34Z'

filter=title pr and userType eq 'Employee'

filter=title pr or userType eq 'Intern'

filter=userType eq 'Employee' and (email co 'example.com' or email
co = 'example.org')
</pre></div>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.2"></a><h3>4.2.2.2.&nbsp;
Sorting</h3>

<p>Sort is OPTIONAL. Sorting allows Consumers to specify the order
              in which Resources are returned by specifying a combination of
              sortBy and sortOrder URL parameters.
            
</p>
<blockquote class="text"><dl>
<dt>sortBy:</dt>
<dd>
                The sortBy parameter specifies the attribute whose value SHALL
                be used to order the returned responses. If the sortBy attribute
                corresponds to a Singular Attribute, Resources are sorted
                according to that attribute's value; if it's a Plural Attribute,
                Resources are sorted by the value of the primary attribute, if
                any, or else the first value in the list, if any. If the
                attribute is complex the attribute name must be a path to a
                Sub-Attribute; e.g., sortBy=name.givenName. For all attribute
                types, if there is no data for the specified sortBy value they
                are sorted via the 'sortOrder' parameter; i.e., they are ordered
                first if ascending and last if descending.
              
</dd>
<dt>sortOrder:</dt>
<dd>
                The order in which the sortBy parameter is applied. Allowed
                values are "ascending" and "descending". If a value for sortBy
                is provided and no sortOrder is specified, the sortOrder SHALL
                default to ascending. Sort order is expected to be
                case-insensitive, Unicode alphabetic sort order, with no
                specific locale implied.
              
</dd>
</dl></blockquote>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2.3"></a><h3>4.2.2.3.&nbsp;
Pagination</h3>

<p>Pagination parameters can be used together to "page through"
              large numbers of Resources so as not to overwhelm the Consumer or
              Service Provider. Pagination is not session based hence Consumers
              SHOULD never assume repeatable results. For example, a request for
              a list of 10 Resources beginning with a startIndex of 1 may return
              different results when repeated as a Resource in the original
              result could be deleted or new ones could be added in-between
              requests. Pagination parameters and general behavior are derived
              from the
              <a href='http://www.opensearch.org/Specifications/OpenSearch/1.1'>OpenSearch Protocol</a>.
            
</p>
<p>The following table describes the URL pagination parameters.
            
</p><br /><hr class="insert" />
<a name="consumer-pagination-options-table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Parameter</th><th align="left">Description</th><th align="left">Default</th></tr>
<tr>
<td align="left">startIndex</td>
<td align="left">The 1-based index of the first search result.
              </td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">count</td>
<td align="left">Non-negative Integer. Specifies the desired maximum number of
                search results per page; e.g., 10.
              </td>
<td align="left">None. When specified the Service Provider MUST not return more
                results than specified though MAY return fewer results. If
                unspecified, the maximum number of results is set by the Service
                Provider.
              </td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 5: Pagination Request parameters&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The following table describes the query response pagination
              attributes specified by the Service Provider.
            
</p><br /><hr class="insert" />
<a name="response-pagination-options-table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Element</th><th align="left">Description</th></tr>
<tr>
<td align="left">itemsPerPage</td>
<td align="left">Non-negative Integer. Specifies the number of search results
                returned in a query response page; e.g., 10.
              </td>
</tr>
<tr>
<td align="left">totalResults</td>
<td align="left">Non-negative Integer. Specifies the total number of results
                matching the Consumer query; e.g., 1000.
              </td>
</tr>
<tr>
<td align="left">startIndex</td>
<td align="left">The 1-based index of the first result in the current set of
                search results; e.g., 1.
              </td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 6: Pagination Response Elements&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              For example, to retrieve the first 10 Users set the startIndex to
              1 and the count to 10.

              </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

GET /Users?startIndex=1&amp;count=10
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8
</pre></div><p>


              </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
{
  "totalResults":100,"itemsPerPage":10,"startIndex":1,
  "schemas":["urn:scim:schemas:core:1.0"],
  "Resources":[{
    ...
  }]
}
</pre></div><p>

              Given the example above, to continue paging set the startIndex to
              11 and re-fetch; i.e., /Users?startIndex=11&amp;count=10
            
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Modifying Resources</h3>

<p>Resources can be modified in whole or in part via PUT or PATCH,
          respectively. Implementers MUST support PUT as specified in
          <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6'>RFC2616</a>
          . Resources such as Groups may be very large hence implementers SHOULD
          support
          <a href='http://tools.ietf.org/html/rfc5789'>PATCH</a>
          to enable partial resource modifications.
        
</p>
<a name="edit-resource-with-put"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.1"></a><h3>4.3.1.&nbsp;
Modifying with PUT</h3>

<p>
            PUT performs a full update. Consumers must retrieve the entire
            Resource and PUT the desired modifications as the operation
            overwrites all previously stored data. Unless otherwise specified a
            successful PUT operation returns a 200 OK response code and the
            entire Resource within the response body.

            Example:
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
PUT /User/uid=bjensen,dc=example,dc=com
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8
ETag: "a330bc54f0671c9"

{
  "schemas":["urn:scim:schemas:core:1.0"],
  "id":"uid=bjensen,dc=example,dc=com",
  "userName":"bjensen",
  "externalId":"bjensen",
  "name":{
    "formatted":"Ms. Barbara J Jensen III",
    "familyName":"Jensen",
    "givenName":"Barbara",
    "middleName":"Jane"

  },
  "emails":[
    {
        "value":"bjensen@example.com"
    },
    {
        "value":"babs@jensen.org"
    }
  ]
}


</pre></div>
<p>
            The service responds with the entire, updated User
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 200 OK
Content-Type: application/json
Authorization: Bearer h480djs93hd8
ETag: "b431af54f0671a2"
Location:"https://example.com/v1/User/uid=bjensen,dc=example,dc=com"
{
  "schemas":["urn:scim:schemas:core:1.0"],
  "id":"uid=bjensen,dc=example,dc=com",
  "userName":"bjensen",
  "externalId":"bjensen",
  "name":{
    "formatted":"Ms. Barbara J Jensen III",
    "familyName":"Jensen",
    "givenName":"Barbara",
    "middleName":"Jane"

  },
  "emails":[
    {
        "value":"bjensen@example.com"
    },
    {
        "value":"babs@jensen.org"
    }
  ],
  "meta": {
    "created":"2011-08-08T04:56:22Z",
    "lastModified":"2011-08-08T08:00:12Z",
    "location":"https://example.com/v1/User/uid=bjensen,dc=example,dc=com",
    "version":"b431af54f0671a2"
  }
}
</pre></div>
<a name="edit-resource-with-patch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3.2"></a><h3>4.3.2.&nbsp;
Modifying with PATCH</h3>

<p>PATCH enables consumers to send only those attributes requiring
            modification reducing network and processing overhead. Attributes
            may be deleted, replaced or added in a single request.

            TBD.

          
</p>
<a name="delete-resource"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Deleting Resources</h3>

<p>Consumers request Resource removal via DELETE. Service Providers MAY
          choose not to permanently delete the Resource, but MUST return a 404
          error code for all operations associated with the previously deleted
          Id. Service Providers MUST also omit the Resource from future query
          results.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


DELETE /User/uid=bjensen,dc=example,dc=com
Host: example.com
Authorization: Bearer h480djs93hd8
ETag: "c310cd84f0281b7"

</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 200 OK
</pre></div>
<p>Example: Consumer attempt to retrieve the previously deleted User
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


GET /User/uid=bjensen,dc=example,dc=com
Host: example.com
Authorization: Bearer h480djs93hd8
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 404 NOT FOUND

{
  "Errors":[
    {
      "description":"Resource uid=bjensen,dc=example,dc=com not found",
      "code":"404"
    }
  ]
}

</pre></div>
<a name="change-password"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Change password</h3>

<p>Consumers request User password change via PATCH. The change password
          operation is OPTIONAL, hence Service Providers MAY choose not to honor
          the request.

          Since a password is a facet of the User the User endpoint is
          overloaded; i.e., /User/{id}/password. The consumer MUST specify the
          attribute 'password' in the request body and MUST not specify any
          other attributes. If successful the Service Provider MUST return a 204
          response code and no content within the response body.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


PATCH /User/uid=bjensen,dc=example,dc=com/password
Host: example.com
Authorization: Bearer h480djs93hd8

{
  "schemas":["urn:scim:schemas:core:1.0"],
  "password":"t1meMa$heen",
}

</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 204 OK
</pre></div>
<a name="schemas"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Retrieving Service Provider Schema</h3>

<p>TBD
</p>
<a name="io-format"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
Data Input/Output Formats</h3>

<p>
          Consumers SHOULD specify the format in which the data is submitted and
          MAY specify the desired response data format. Consumers MAY indicate
          the desired format via an HTTP Accept Header; e.g.,"Accept:
          application/json" or via URI suffix; e.g.,

          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

GET /User/uid=bjensen,dc=example,dc=com.json
Host: example.com

GET /User/uid=bjensen,dc=example,dc=com.xml
Host: example.com
</pre></div><p>


        
</p>
<p>
          Service Providers MUST support the Accept Headers "Accept:
          application/json" for
          <a href='http://json.org'>JSON</a>
          and "Accept: application/xml" for
          <a href='http://www.w3.org/XML/'>XML</a>
          and MAY support additional formats if desired. The format defaults to
          JSON if no format is specified. The data structure returned is
          equivalent in both formats; the only difference is in the encoding of
          the data.
        
</p>
<p>
          Singular attributes are encoded as string key/value pairs in JSON;
          e.g.,
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
"attribute": "value"
</pre></div>
<p>and tags with text content in XML; e.g.,
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;attribute&gt;value&lt;/attribute&gt;
</pre></div>
<p>
          Plural attributes and Plural Bundles are encoded as arrays in JSON;
          e.g.,
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
"attributes": [ "value1", "value2" ]
</pre></div>
<p>
          and repeated tags in XML; e.g.,
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;attributes&gt;value1&lt;/attributes&gt;
&lt;attributes&gt;value2&lt;/attributes&gt;
</pre></div>
<p>
          Nodes with multiple sub-nodes are represented as objects in JSON; e.g,
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
"attribute": { "subattribute1": "value1", "subattribute2": "value2" }
</pre></div>
<p>
          and repeated tags in XML; e.g.,
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;attribute&gt;
  &lt;subattribute1&gt;value1&lt;/subattribute1&gt;
  &lt;subattribute2&gt;value2&lt;/subattribute2&gt;
&lt;/attribute&gt;
</pre></div>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.8"></a><h3>4.8.&nbsp;
Additional retrieval query parameters</h3>

<p>
          Consumers MAY request a partial Resource representation on any
          operation that returns a Resource within the response by specifying
          the URL query parameter 'attributes'. When specified, each Resource
          returned SHALL contain the minimal set of Resource attributes and, at
          the Service Providers discretion, the attributes explicitly requested.

          The query parameter attributes value is a comma separated list of
          Resource attribute names (e.g. userName, name, emails). Extended
          schema attribute names must be prefixed with the attribute name's
          fully qualified URN separated by a colon (':'). For example, an
          extended schema name-spaced as 'urn:hr:schemas:user with the simple
          attribute 'age' is fully encoded as 'urn:hr:schemas:user:age'.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /User/uid=bjensen,dc=example,dc=com?attributes=displayName
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8

</pre></div>
<p>Giving the response
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 200 OK
Content-Type: application/json
Location: https://example.com/v1/User/uid=bjensen,dc=example,dc=com
ETag: "a330bc54f0671c9"

{
  "schemas":["urn:scim:schemas:core:1.0"],
  "id":"uid=bjensen,dc=example,dc=com",
  "meta":{
    "created":"2011-08-01T18:29:49.793Z",
    "lastModified":"2011-08-01T18:29:49.793Z",
    "location":"https://example.com/v1/User/uid=bjensen,dc=example,dc=com"
  }
}

</pre></div>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.9"></a><h3>4.9.&nbsp;
HTTP Response Codes</h3>

<p>
          The SCIM Protocol uses the response
          <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html'>status codes defined in HTTP</a>
          to indicate operation success or failure. In addition to returning a
          HTTP response code implementers MUST return the errors in the body of
          the response in the client requested format containing the error
          response and, per the HTTP specification, human-readable explanations.
          Implementers SHOULD handle the identified errors as described below.
        
</p><br /><hr class="insert" />
<a name="http-error-handling-table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Code</th><th align="left">Applicability</th><th align="left">Suggested Explanation</th></tr>
<tr>
<td align="left">400 BAD REQUEST</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">Request is unparseable, syntactically incorrect, or violates schema
          </td>
</tr>
<tr>
<td align="left">401 UNAUTHORIZED</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">Authorization failure</td>
</tr>
<tr>
<td align="left">403 FORBIDDEN</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">Server does not support requested operation</td>
</tr>
<tr>
<td align="left">404 NOT FOUND</td>
<td align="left">GET,PUT,PATCH,DELETE</td>
<td align="left">Specified resource; e.g., User, does not exist</td>
</tr>
<tr>
<td align="left">409 CONFLICT</td>
<td align="left">PUT,PATCH,DELETE</td>
<td align="left">The specified version number does not match the resource's latest
            version number or a Service Provider refused to create a new,
            duplicate resource
          </td>
</tr>
<tr>
<td align="left">412 PRECONDITION FAILED</td>
<td align="left">PUT,PATCH</td>
<td align="left">Failed to update as Resource {id} changed on the server since you
            last retrieved it
          </td>
</tr>
<tr>
<td align="left">500 INTERNAL SERVER ERROR</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">An internal error. Implementers SHOULD provide descriptive
            debugging advice
          </td>
</tr>
<tr>
<td align="left">501 NOT IMPLEMENTED</td>
<td align="left">GET,POST,PUT,PATCH,DELETE</td>
<td align="left">Service Provider does not support the request operation; e.g.,
            PATCH
          </td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 7: Defined error cases&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Error example in response to a non-existent GET request.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

HTTP/1.1 404 NOT FOUND

{
  "Errors":[
    {
      "description":"Resource uid=babs not found",
      "code":"404"
    }
  ]
}
</pre></div>
<a name="etags"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.10"></a><h3>4.10.&nbsp;
Versioning Resources</h3>

<p>
          The API supports resource versioning via standard,<a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19'>HTTP ETags</a>. Service providers MAY support both weak and strong
          ETags as the preferred mechanism for performing conditional retrievals
          and ensuring Consumers do not inadvertently overwrite each others
          changes, respectively. When supported SCIM ETags MUST be specified as
          an HTTP header and SHOULD be specified as an attribute within a
          Resource's 'meta' structure.
        
</p>
<p>Example
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
POST /User  HTTP/1.1
Host: example.com
Content-Type:  application/json
Authorization: Bearer h480djs93hd8
Content-Length: ...

{
  "schemas":["urn:scim:schemas:core:1.0"],
  "userName":"bjensen",
  "externalId":"bjensen",
  "name":{
    "formatted":"Ms. Barbara J Jensen III",
    "familyName":"Jensen",
    "givenName":"Barbara"
  }
}
</pre></div>
<p>The server responds with an ETag in the response header and meta
          structure.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 201 Created
Content-Type: application/json
Location: https://example.com/v1/User/uid=bjensen,dc=example,dc=com
ETag: "e180ee84f0671b1"

{
  "schemas":["urn:scim:schemas:core:1.0"],
  "id":"uid=bjensen,dc=example,dc=com",
  "meta":{
    "created":"2011-08-01T21:32:44.882Z",
    "lastModified":"2011-08-01T21:32:44.882Z",
    "location":"https://example.com/v1/User/uid=bjensen,dc=example,dc=com"
  },
  "name":{
    "formatted":"Ms. Barbara J Jensen III",
    "familyName":"Jensen",
    "givenName":"Barbara"
  },
  "userName":"bjensen"
}
</pre></div>
<p>With the returned ETag, Consumers can choose to retrieve the Resource
          only if the Resource has been modified. In addition, if updating,
          specifying an ETag guarantees that previous updates will not be
          overwritten. Note: Per the HTTP specification the ETag value is
          quoted.
        
</p>
<p>Conditional retrieval example using
          <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26'>If-None-Match</a>
          header:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /User/uid=bjensen,dc=example,dc=com?attributes=displayName
Host: example.com
Accept: application/json
Authorization: Bearer h480djs93hd8
If-None-Match: "e180ee84f0671b1"

</pre></div>
<p>
          If the Resource has not changed the Service Provider simply returns an
          empty body with a 304 "Not Modified" response code.
        
</p>
<p>
          Similarly, consumers may supply an
          <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24'>If-Match</a>
          ETag header for PUT, PATCH, and DELETE operations to ensure that the
          requested operation succeeds only if the supplied ETag matches the
          latest Service Provider Resource; e.g., If-Match: "e180ee84f0671b1"
        
</p>
<p>
          To perform DELETE, PATCH, or PUT operations and override ETag
          versioning specify
          <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24'>"If-Match: *"</a>
          in lieu of an ETag header.
        
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.11"></a><h3>4.11.&nbsp;
HTTP Method Overloading</h3>

<p>In recognition that some clients, servers and firewalls prevent PUT,
          PATCH and DELETE operations a client MAY override the POST operation
          by specifying the custom header "X-HTTP-Method-Override" with the
          intended PUT, PATCH, DELETE operation. For example:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

POST /User/uid=bjensen,dc=example,dc=com
X-HTTP-Method-Override: DELETE
</pre></div>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Acknowledgments</h3>

<p>Portable Contacts -
        <a href='http://www.portablecontacts.net/draft-spec.html'>Portable Contacts 1.0 Draft C</a>
      
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Trey Drake (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UnboundID</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:trey.drake@unboundid.com">trey.drake@unboundid.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chuck Mortimore</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SalesForce</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:cmortimore@salesforce.com">cmortimore@salesforce.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Morteza Ansari</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:morteza.ansari@webex.com">morteza.ansari@webex.com</a></td></tr>
</table>
</body></html>